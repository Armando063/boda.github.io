<!DOCTYPE html>

<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Boda Armando & Brenda Fernanda</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { font-family: 'Georgia', serif; background-color: #faf7f2; }
    .hero { background: url('https://picsum.photos/1600/800?blur=2') center/cover no-repeat; height: 100vh; color: white; text-align: center; display: flex; flex-direction: column; justify-content: center; }
    .hero h1 { font-size: 4rem; text-shadow: 2px 2px 5px rgba(0,0,0,0.5); }
    .hero p { font-size: 1.5rem; }
    .section { padding: 60px 20px; }
    footer { background: #333; color: white; padding: 20px; text-align: center; }
  </style>
</head>
<body>

  <!-- Portada -->
  <section class="hero">
    <h1>Armando & Brenda Fernanda</h1>
    <p>¡Nos casamos! 🎉<br> 15 de Noviembre 2025 - CDMX</p>
  </section>

  <!-- Detalles -->
  <section class="section text-center">
    <h2>Detalles del evento</h2>
    <p>📍 Salón Bellavista, CDMX</p>
    <p>⏰ Ceremonia: 5:00 PM</p>
    <p>🎉 Recepción: 7:00 PM</p>
  </section>

  <!-- Mapa -->
  <section class="section text-center bg-light">
    <h2>Ubicación</h2>
    <iframe src="https://www.google.com/maps/embed?pb=!1m18..." width="100%" height="400" style="border:0;" allowfullscreen></iframe>
  </section>

  <!-- Confirmación (RSVP) -->
  <section class="section text-center">
    <h1>Armando & Brenda Fernanda 💍</h1>
  <h2 id="saludo"></h2>

  <form id="rsvpForm" class="container" style="max-width:500px;">
    <input type="hidden" name="id" id="id_invitado">
    <input type="hidden" name="nombre" id="nombre_invitado">

    <div class="mb-3">
      <label class="form-label">¿Asistirás?</label>
      <select class="form-select" id="asistencia" required>
        <option value="Sí">Sí, asistiré</option>
        <option value="No">No podré asistir</option>
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label">Número de lugares confirmados</label>
      <input type="number" class="form-control" id="lugares" min="0">
      <div class="form-text" id="nota-lugares"></div>
    </div>

    <button type="submit" class="btn btn-dark">Confirmar 🎉</button>
  </form>


  </section>

  <!-- Footer -->
  <footer>
    <p>Con cariño, Armando & Brenda Fernanda 💕</p>
  </footer>

</body>
  <script>
    // URL de tu Google Apps Script
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbw1Jl-HK66Ex4PJPiONhQuyBuPxFn104VgYH10at9LDbrrHu8BEWv32GbfrgJlZbi_law/exec";

    // Lista de invitados
    const invitados = {
      "12345": { nombre: "Juan Pérez", lugares: 4 },
      "67890": { nombre: "María López", lugares: 2 },
      "54321": { nombre: "Carlos Hernández", lugares: 1 }
    };

    // Obtener ID de la URL
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");

    if (id && invitados[id]) {
      const invitado = invitados[id];
      document.getElementById("saludo").innerText = 
        `¡Hola ${invitado.nombre}, tienes ${invitado.lugares} lugares reservados! 🎉`;

      document.getElementById("id_invitado").value = id;
      document.getElementById("nombre_invitado").value = invitado.nombre;

      const lugaresInput = document.getElementById("lugares");
      lugaresInput.max = invitado.lugares;
      lugaresInput.value = invitado.lugares;

      document.getElementById("nota-lugares").innerText = 
        `Puedes confirmar hasta ${invitado.lugares} lugar(es).`;

    } else {
      document.getElementById("saludo").innerText = "Invitación no válida ❌";
      document.querySelector("form").style.display = "none";
    }

    // Enviar datos a Google Sheets
    document.getElementById("rsvpForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const data = {
        id: document.getElementById("id_invitado").value,
        nombre: document.getElementById("nombre_invitado").value,
        asistencia: document.getElementById("asistencia").value,
        lugares: document.getElementById("lugares").value
      };

      fetch(SCRIPT_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      })
      .then(res => res.text())
      .then(msg => {
        if (msg === "OK") {
          alert("✅ ¡Gracias por confirmar!");
          document.querySelector("button").disabled = true; // Deshabilita botón
        } else if (msg === "Ya confirmado") {
          alert("⚠️ Ya has confirmado antes.");
          document.querySelector("button").disabled = true;
        }
      })
      .catch(err => alert("❌ Error al enviar, intenta de nuevo"));


    });
  </script>
</html>